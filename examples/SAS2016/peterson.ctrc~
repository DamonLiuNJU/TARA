###Peterson###

global: flag1 flag2 turn cs

pre: (and (= flag1 0) (= flag2 0) (= cs 0))

thread P0 {r0 r1}:
w1: (= flag1. 1)
w2: (= turn. 1)
w3: (= r0 flag2)
w4: (= r1 turn)
w5: assume(not (and (= r0 1) (= r1 1)))
w6: (= cs. (+ cs 1))
w7: (= flag2. 0)

thread P1 {r2 r3}:
d1: (= flag2. 1)
d2: (= turn. 0)
d3: (= r2 flag1)
d4: (= r3 turn)
d5: assume(not (and (= r2 1) (= r3 0)))
d6: (= cs. (+ cs 1))
d7: (= flag1. 0)

post: (or (= r0 1) (= r1 1))
