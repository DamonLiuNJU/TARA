###Dekker###

global: flag1 flag2 turn cs

pre: (and (= flag1 0) (= flag2 0) (= cs 0))

thread P0 {r0 r1}:
w1 : (= flag1. 1)
w2 : (= r0 flag2)
w3 : assume(= r0 1)
w4 : (= r1 turn)
w5 : assume(not (= r1 0))
w6 : (= flag1. 0)
w7 : assume(not (= r1 0))
w8 : assume(= r1 0)
w9 : (= flag1 1)
w10: (= r0 flag2)
w11: assume(not (= r0 1))
w12: (= cs. (+ cs 1))
w13: (= turn. 1)
w14: (= flag1. 0)

thread P1 {r2 r3}:
d1 : (= flag2. 1)
d2 : (= r2 flag1)
d3 : assume(= r2 1)
d4 : (= r3 turn)
d5 : assume(not (= r3 1))
d6 : (= flag2. 0)
d7 : assume(not (= r3 1))
d8 : assume(= r3 0)
d9 : (= flag2 1)
d10: (= r2 flag1)
d11: assume(not (= r2 1))
d12: (= cs. (+ cs 1))
d13: (= turn. 1)
d14: (= flag2. 0)

post: (= cs 1)
